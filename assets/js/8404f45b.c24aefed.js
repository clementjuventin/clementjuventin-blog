"use strict";(self.webpackChunkpersonal_website=self.webpackChunkpersonal_website||[]).push([[596],{78:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/opal_cover-96ed8f824584679203af5a2655780a7a.jpeg"},4669:e=>{e.exports=JSON.parse('{"permalink":"/clementjuventin-blog/opal","source":"@site/blog/2024-09-15-opal.md","title":"Opal - Yield DApp built on top of Balancer V2","description":"In September 2023, I was invited to lend a hand on an ambitious DeFi project built on Ethereum called Opal. What started as a casual contribution soon evolved into a core team membership. This is the story of how we built and launched the platform.","date":"2024-09-15T00:00:00.000Z","tags":[{"inline":false,"label":"Opal","permalink":"/clementjuventin-blog/tags/opal","description":"Opal articles"},{"inline":false,"label":"Story","permalink":"/clementjuventin-blog/tags/story","description":"Story about my life"},{"inline":false,"label":"Web3","permalink":"/clementjuventin-blog/tags/web3","description":"Web3 related projects"}],"readingTime":5.07,"hasTruncateMarker":true,"authors":[{"name":"Cl\xe9ment Juventin","title":"Internet traveler \ud83e\udd16\u200b","url":"https://linkedin.com/in/cl\xe9ment-juventin-ab81841a3/","page":{"permalink":"/clementjuventin-blog/authors/clementjuventin"},"socials":{"linkedin":"https://www.linkedin.com/in/clementjuventin/","github":"https://github.com/clementjuventin"},"imageURL":"https://github.com/clementjuventin.png","key":"clementjuventin"}],"frontMatter":{"slug":"opal","title":"Opal - Yield DApp built on top of Balancer V2","authors":"clementjuventin","tags":["opal","story","web3"]},"unlisted":false,"prevItem":{"title":"Opal - Technical Overview","permalink":"/clementjuventin-blog/opal-technical-overview"},"nextItem":{"title":"Tackling Rate Limiting, One of My First Challenges at Cede Labs","permalink":"/clementjuventin-blog/request-throttler"}}')},6104:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var i=n(4669),a=n(3420),o=n(8906);const s={slug:"opal",title:"Opal - Yield DApp built on top of Balancer V2",authors:"clementjuventin",tags:["opal","story","web3"]},r=void 0,l={authorsImageUrls:[void 0]},d=[{value:"Opal Explained",id:"opal-explained",level:2},{value:"The team",id:"the-team",level:2},{value:"Development Journey",id:"development-journey",level:2},{value:"Fundraising: Private &amp; Public Rounds",id:"fundraising-private--public-rounds",level:2},{value:"Delivering on Expectations",id:"delivering-on-expectations",level:2},{value:"Opal in Production",id:"opal-in-production",level:2},{value:"The Downside",id:"the-downside",level:2},{value:"Redemption Arc",id:"redemption-arc",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",h2:"h2",img:"img",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["In September 2023, I was invited to lend a hand on an ambitious DeFi project built on ",(0,a.jsx)(t.strong,{children:"Ethereum"})," called ",(0,a.jsx)(t.strong,{children:"Opal"}),". What started as a casual contribution soon evolved into a ",(0,a.jsx)(t.strong,{children:"core team membership"}),". This is the story of how we built and launched the platform."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Opal Cover",src:n(78).A+"",width:"2560",height:"1440"})}),"\n",(0,a.jsx)(t.h2,{id:"opal-explained",children:"Opal Explained"}),"\n",(0,a.jsxs)(t.p,{children:["Opal is a ",(0,a.jsx)(t.strong,{children:"DeFi"})," protocol rooted in the Ethereum ecosystem, specifically leveraging ",(0,a.jsx)(t.a,{href:"https://balancer.fi/",children:"Balancer V2"})," and ",(0,a.jsx)(t.a,{href:"https://aura.finance/",children:"Aura Finance"}),". Its core mission is to offer a simple financial system with dynamic yield-generating strategies. The centerpiece of the protocol is the ",(0,a.jsx)(t.strong,{children:"Omnipool"}),": a single-asset liquidity pool that dynamically distributes and rebalances liquidity across multiple pools."]}),"\n",(0,a.jsxs)(t.p,{children:["Liquidity allocation is governed by a community voting mechanism, powered by the ",(0,a.jsx)(t.strong,{children:"GEM"})," token, which represents the protocol's decision-making authority."]}),"\n",(0,a.jsxs)(t.p,{children:["Opal draws heavy inspiration from ",(0,a.jsx)(t.a,{href:"https://conic.finance/",children:(0,a.jsx)(t.strong,{children:"Conic Finance"})}),", which operates within the Curve ecosystem. For more on the financial mechanics, I\u2019ll defer to the experts \u2014 I'm not the one designing the protocol financial logic, but rather the one helping make it a reality. To understand the intricacies, visit ",(0,a.jsx)(t.a,{href:"https://docs.opaldefi.xyz/",children:"our documentation"})," and appreciate this flywheel being as beautiful as it is hard to understand."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Opal Flywheel",src:n(7202).A+"",width:"1200",height:"675"})}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:["The Opal Flywheel. Source: ",(0,a.jsx)(t.a,{href:"https://docs.opaldefi.xyz/",children:"Opal Documentation"}),"."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"the-team",children:"The team"}),"\n",(0,a.jsx)(t.p,{children:"Our team consisted of four developers and two business/vision managers. We set out to build a complete protocol, production-ready and capable of handling potentially millions in value."}),"\n",(0,a.jsxs)(t.p,{children:["Though I lacked experience, I made up for it with ",(0,a.jsx)(t.strong,{children:"strong fundamentals"})," and ",(0,a.jsx)(t.strong,{children:"relentless motivation"}),". That\u2019s how my Opal journey began \u2014 a bold, real-world challenge I was eager to take on."]}),"\n",(0,a.jsx)(t.h2,{id:"development-journey",children:"Development Journey"}),"\n",(0,a.jsxs)(t.p,{children:["Over several months, we shaped the protocol and defined the requirements for the first version. I was assigned to the ",(0,a.jsx)(t.strong,{children:"Reward Manager"}),", a crucial module responsible for distributing rewards from the Omnipools to users. It was a tricky component, and the initial team had struggled with it, which is why I was brought on board."]}),"\n",(0,a.jsx)(t.p,{children:"To be honest, I struggled too. I\u2019ll dive into the technical and mathematical complexity of this module in a later post."}),"\n",(0,a.jsx)(t.p,{children:"At this stage, Opal was still a side project for everyone, so the relatively slow development pace suited us. But that was about to change."}),"\n",(0,a.jsx)(t.h2,{id:"fundraising-private--public-rounds",children:"Fundraising: Private & Public Rounds"}),"\n",(0,a.jsxs)(t.p,{children:["While development was underway, the business team was busy pitching to investors and organizing a private seed round. I wasn\u2019t deeply involved in this phase, but word was that it went well \u2014 we secured commitments without giving up too many tokens, and ",(0,a.jsx)(t.strong,{children:"early signs from the market were encouraging"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["Our ",(0,a.jsx)(t.a,{href:"https://x.com/opaldefi",children:"Twitter"})," and Discord communities started ",(0,a.jsx)(t.strong,{children:"gaining traction"}),", adding pressure on the dev team to finalize the protocol."]}),"\n",(0,a.jsx)(t.p,{children:"The funds raised during the private seed were used to ramp up marketing: promo videos, contests, influencer campaigns \u2014 all in preparation for the public round."}),"\n",(0,a.jsxs)(t.p,{children:["The public raise was hosted on ",(0,a.jsx)(t.a,{href:"https://app.fjordfoundry.com/token-sales/0x1F272Ab2BDc512cb59e7b49485eFE16d2d7F9ffa",children:"Fjord Foundry"}),", a platform tailored for such events. The response was phenomenal \u2014 we raised $1.58 million. I could hardly believe it myself."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Opal fundraising metrics",src:n(8859).A+"",width:"1241",height:"448"})}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:["Opal fundraising metrics. Source: ",(0,a.jsx)(t.a,{href:"https://app.fjordfoundry.com/token-sales/0x1F272Ab2BDc512cb59e7b49485eFE16d2d7F9ffa",children:"Fjord Foundry"}),"."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"delivering-on-expectations",children:"Delivering on Expectations"}),"\n",(0,a.jsx)(t.p,{children:"With a successful raise behind us, the pressure was on. Development needed to accelerate. Looking back, this period was rough \u2014 we clearly underestimated the time required to finalize the product."}),"\n",(0,a.jsxs)(t.p,{children:["We went from working 4\u20136 hours a week to over 20 hours per week, all while juggling full-time jobs. We rushed through two audits, each with just five days to fix reported issues. The first audit revealed more flaws than I expected, which was nerve-racking. But if you're in a similar situation \u2014 ",(0,a.jsx)(t.strong,{children:"don\u2019t panic"}),". It's normal, and you\u2019ll likely go through more audits to patch things up."]}),"\n",(0,a.jsx)(t.p,{children:"The machine was running at full speed. We were in the final stretch."}),"\n",(0,a.jsx)(t.h2,{id:"opal-in-production",children:"Opal in Production"}),"\n",(0,a.jsx)(t.p,{children:"They say childbirth is one of the most painful human experiences. I won\u2019t compare directly, but launching Opal felt like a drawn-out labor with complications."}),"\n",(0,a.jsxs)(t.p,{children:["What was supposed to take hours ended up taking a full week due to last-minute issues. One integration test was producing inexplicable results. Exhaustion and stress didn\u2019t help. We delayed the launch to debug the issue, which turned out to be a decimal misconfiguration. Not catastrophic, but enough to ",(0,a.jsx)(t.strong,{children:"shake our confidence"})," just hours before going live."]}),"\n",(0,a.jsxs)(t.p,{children:["Still, we launched. TVL started rising, eventually hitting ",(0,a.jsx)(t.strong,{children:"$8 million\u2014a historic high"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"the-downside",children:"The Downside"}),"\n",(0,a.jsx)(t.p,{children:"Post-launch, Opal faced criticism. The community expected a more polished product with more features. We had delivered everything planned for V1, so I was surprised. But it may have been more about market conditions and a separate incident with MEV Capital."}),"\n",(0,a.jsxs)(t.p,{children:["MEV Capital, one of our biggest backers, had contributed ~80% of our TVL. They decided to withdraw a large amount of the protocol's liquidity without warning. Unfortunately, they encountered a bug in the DApp's slippage logic on one of the Omnipools. Without simulating the transaction or using a MEV blocker, they suffered an instant and irreversible ",(0,a.jsx)(t.strong,{children:"six-figure MEV loss"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"Tensions rose when the Opal team chose not to assume responsibility. That day, our TVL dropped significantly, and the protocol's reputation took a major hit."}),"\n",(0,a.jsx)(t.p,{children:"It's hard to accept that the future of the protocol hinged on a small, avoidable mistake\u2014something that could\u2019ve been prevented in countless ways, both on our side and MEV Capital\u2019s. All I can say is: it happened, and it cost us dearly."}),"\n",(0,a.jsx)(t.h2,{id:"redemption-arc",children:"Redemption Arc"}),"\n",(0,a.jsx)(t.p,{children:"In the months that followed, we managed to rebuild some momentum. We secured a grant from Balancer, added new features, and brought TVL back to around $600K."}),"\n",(0,a.jsx)(t.p,{children:"We're currently trying to re-energize the project with an airdrop campaign, community incentives, and feature updates."}),"\n",(0,a.jsx)(t.p,{children:"The project still suffers from its damaged reputation, and the omnipool model has lost some steam \u2014 especially after Conic Finance started to talk about shutting down their protocol."}),"\n",(0,a.jsx)(t.p,{children:"But we're still optimistic. Our product has been battle-tested, and we remain committed to improving and promoting it. With continued effort, Opal might just win people over again."})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},7202:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/opal_flywheel-d2fbd2f972c62231df5c650b0389ee57.png"},8859:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/opal_fundraise-10d7df6c066e039cf1390e8b6e1dadcf.png"},8906:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var i=n(6672);const a={},o=i.createContext(a);function s(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);